<!doctype html><html lang=en><head><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="text/html; charset=utf-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1.0,maximum-scale=1" name=viewport><title>Coloring matched portions with GNU grep, sed and awk</title><link href=https://learnbyexample.github.io/atom.xml rel=alternate title=RSS type=application/atom+xml><script src=https://cdnjs.cloudflare.com/ajax/libs/slideout/1.0.1/slideout.min.js></script><link href=https://learnbyexample.github.io/site.css rel=stylesheet><meta content="Coloring matched portions with GNU grep, sed and awk" property=og:title><meta content=website property=og:type><meta content="Examples for highlighting text of interest with various Linux CLI tools." property=og:description><meta content=https://learnbyexample.github.io/coloring-matched-portions-grep-sed-awk/ property=og:url><meta content=https://learnbyexample.github.io/images/awk_color_field_processing.png property=og:image><meta content=752 property=og:image:width><meta content=467 property=og:image:height><meta content=summary_large_image property=twitter:card><meta content=@learn_byexample property=twitter:site><link href=https://learnbyexample.github.io/favicon.svg rel=icon><link rel="shortcut icon" href=https://learnbyexample.github.io/favicon.png><body><div class=container><div class=mobile-navbar id=mobile-navbar><div class=mobile-header-logo><a class=logo href=/>learnbyexample</a></div><div class="mobile-navbar-icon icon-out"><span></span><span></span><span></span></div></div><nav class="mobile-menu slideout-menu slideout-menu-left" id=mobile-menu><ul class=mobile-menu-list><li class=mobile-menu-item><a href=https://learnbyexample.github.io/books> Books </a><li class=mobile-menu-item><a href=https://learnbyexample.github.io/mini> Mini </a><li class=mobile-menu-item><a href=https://learnbyexample.github.io/tips> Tips </a><li class=mobile-menu-item><a href=https://learnbyexample.github.io/tags> Tags </a><li class=mobile-menu-item><a href=https://learnbyexample.github.io/about> About </a></ul></nav><header id=header><div class=logo><a href=https://learnbyexample.github.io>learnbyexample</a></div><nav class=menu><ul><li><a href=https://learnbyexample.github.io/books> Books </a><li><a href=https://learnbyexample.github.io/mini> Mini </a><li><a href=https://learnbyexample.github.io/tips> Tips </a><li><a href=https://learnbyexample.github.io/tags> Tags </a><li><a href=https://learnbyexample.github.io/about> About </a></ul></nav></header><main><div class=content id=mobile-panel><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a class=toc-link href=https://learnbyexample.github.io/coloring-matched-portions-grep-sed-awk/#gnu-grep>GNU grep</a><li><a class=toc-link href=https://learnbyexample.github.io/coloring-matched-portions-grep-sed-awk/#formatting-with-ansi-escape-sequences>Formatting with ANSI escape sequences</a><li><a class=toc-link href=https://learnbyexample.github.io/coloring-matched-portions-grep-sed-awk/#gnu-sed>GNU sed</a><li><a class=toc-link href=https://learnbyexample.github.io/coloring-matched-portions-grep-sed-awk/#gnu-awk>GNU awk</a><li><a class=toc-link href=https://learnbyexample.github.io/coloring-matched-portions-grep-sed-awk/#linux-cli-ebooks>Linux CLI ebooks</a></ul></nav></div></div><article class=post><header class=post__header><h1 class=post__title><a href=https://learnbyexample.github.io/coloring-matched-portions-grep-sed-awk/>Coloring matched portions with GNU grep, sed and awk</a></h1><div class=post__meta><span class=post__time>2025-01-13</span></div></header><div class=post-content><p>You might already know how to use the <code>--color</code> option to highlight matched portions with <code>GNU grep</code>. In this post, you'll see how to use ANSI escape sequences to format matched portions with <code>GNU sed</code> and <code>GNU awk</code>.</p><span id=continue-reading></span><br><h2 id=gnu-grep>GNU grep<a aria-label="Anchor link for: gnu-grep" class=zola-anchor href=#gnu-grep>üîó</a></h2><p>Consider this sample input file:<pre style=background-color:#f5f5f5;color:#1f1f1f;><code><span>$ cat fruits.txt
</span><span>banana mango cherry pineapple
</span><span>grape fig apple dragonfruit papaya
</span><span>watermelon cashew tomato orange
</span><span>almond lime grapefruit walnut
</span></code></pre><p>The output for <code>grep --color -wE '[ago]\w+' fruits.txt</code> is shown below:<p align=center><img alt="Example for displaying matched portions in color with GNU grep" src=/images/grep_color.png><p><img alt=info src=/images/info.svg> See <a href=https://learnbyexample.github.io/learn_gnugrep_ripgrep/frequently-used-options.html#colored-output>this section</a> from my ebook on <code>GNU grep</code> for more details about this option. <a href=https://github.com/BurntSushi/ripgrep>ripgrep</a> has a more featured support for color formatting, see <a href=https://learnbyexample.github.io/learn_gnugrep_ripgrep/ripgrep.html#colored-output>this section</a> for an example.</p><br><h2 id=formatting-with-ansi-escape-sequences>Formatting with ANSI escape sequences<a aria-label="Anchor link for: formatting-with-ansi-escape-sequences" class=zola-anchor href=#formatting-with-ansi-escape-sequences>üîó</a></h2><p>Here are some examples to show how you can format text in the terminal using ANSI escape sequences:<p align=center><img alt="Examples for formatting with ANSI escape sequences" src=/images/ANSI_escape_sequences_formatting.png><p>Your choice of formatting goes between <code>\033[</code> and <code>m</code>. You can use <code>01</code> for <strong>bold</strong>, <code>03</code> for <em>italics</em> and <code>04</code> for <u>underline</u>. <code>31</code> is for the color <font color=red>red</font>, <code>32</code> for <font color=green>green</font> and <code>34</code> for <font color=blue>blue</font>. Multiple formats can be specified by separating the parameters with a semicolon. Using <code>0</code> turns off the format (otherwise, it will persist in the current terminal session until turned off).<p>If you find a file that has accidentally saved such escape sequences, you can use <code>cat -v</code> to identify them.<pre style=background-color:#f5f5f5;color:#1f1f1f;><code><span>$ echo 'one (two) three' | grep --color=always '(two)' | cat -v
</span><span>one ^[[01;31m^[[K(two)^[[m^[[K three
</span></code></pre><p>See also:<ul><li><a href=https://stackoverflow.com/q/4842424/4082052>List of ANSI color escape sequences</a><li><a href=https://unix.stackexchange.com/q/148/109046>Colorizing your terminal and shell environment</a></ul><p><img alt=info src=/images/info.svg> Note that you can also use <code>\e</code> instead of <code>\033</code> in the above examples. However, that will not work with the <code>GNU awk</code> examples shown below.</p><br><h2 id=gnu-sed>GNU sed<a aria-label="Anchor link for: gnu-sed" class=zola-anchor href=#gnu-sed>üîó</a></h2><p>With <code>GNU sed</code>, you'll need to use <code>\o</code> to specify an octal escape sequence. Here's an example:<p align=center><img alt="Example for displaying matched portions in color with GNU sed" src=/images/sed_color.png><p>Here's an example for processing lines bounded by distinct markers:<pre style=background-color:#f5f5f5;color:#1f1f1f;><code><span>$ cat blocks.txt
</span><span>mango
</span><span>icecream
</span><span>--start 1--
</span><span>dragon 1234
</span><span>unicorn 6789
</span><span>**end 1**
</span><span>have a nice day
</span><span>--start 2--
</span><span>a b c
</span><span>apple banana cherry
</span><span>**end 2**
</span><span>par,far,mar,tar
</span></code></pre><p align=center><img alt="Highlighting portion of interest in multiline processing with GNU sed" src=/images/sed_multiline_color.png></p><br><h2 id=gnu-awk>GNU awk<a aria-label="Anchor link for: gnu-awk" class=zola-anchor href=#gnu-awk>üîó</a></h2><p>With <code>GNU awk</code>, you can embed the ANSI escape sequences in a string similar to the <code>printf</code> example seen earlier.<p align=center><img alt="Example for displaying matched portions in color with GNU awk" src=/images/awk_color.png><p>Here's a field processing example:<pre style=background-color:#f5f5f5;color:#1f1f1f;><code><span>$ cat marks.txt 
</span><span>Dept    Name    Marks
</span><span>ECE     Raj     53
</span><span>ECE     Joel    62
</span><span>EEE     Moi     68
</span><span>CSE     Surya   81
</span><span>EEE     Tia     59
</span><span>ECE     Om      92
</span><span>CSE     Amy     67
</span><span>
</span><span>$ cat filter.txt 
</span><span>ECE 70
</span><span>EEE 65
</span><span>CSE 80
</span></code></pre><p align=center><img alt="Color field processing results with GNU awk" src=/images/awk_color_field_processing.png></p><br><h2 id=linux-cli-ebooks>Linux CLI ebooks<a aria-label="Anchor link for: linux-cli-ebooks" class=zola-anchor href=#linux-cli-ebooks>üîó</a></h2><p>Check out <a href=https://learnbyexample.github.io/books/>my ebooks</a> if you are interested in learning more about Linux CLI basics, coreutils, text processing tools like <code>GNU grep</code>, <code>GNU sed</code>, <code>GNU awk</code> and <code>perl</code>.</div><div class=post-footer><div class=post-tags><a href=https://learnbyexample.github.io/tags/gnu-grep/>#gnu-grep</a><a href=https://learnbyexample.github.io/tags/gnu-sed/>#gnu-sed</a><a href=https://learnbyexample.github.io/tags/gnu-awk/>#gnu-awk</a><a href=https://learnbyexample.github.io/tags/linux/>#linux</a></div><hr color=#e6e6e6><div class=post-nav><p><a class=previous href=https://learnbyexample.github.io/understanding-python-regex-announcement/>‚Üê Understanding Python re(gex)? book announcement</a><br><p><a class=next href=https://learnbyexample.github.io/100-page-python-intro-book-announcement/>100 Page Python Intro book announcement ‚Üí</a><br></div><hr color=#e6e6e6><p>üì∞ Use <a href=https://learnbyexample.github.io/atom.xml>this link</a> for the Atom feed. <br> ‚úÖ Follow me on <a href=https://twitter.com/learn_byexample>Twitter</a>, <a href=https://github.com/learnbyexample>GitHub</a> and <a href=https://www.youtube.com/c/learnbyexample42>Youtube</a> for interesting tech nuggets. <br> üìß Subscribe to <a href=https://learnbyexample.gumroad.com/l/learnbyexample-weekly>learnbyexample weekly</a> for programming resources, tips, tools, free ebooks and more (free newsletter, delivered every Friday).<hr color=#e6e6e6></div></article></div></main></div><script src=https://learnbyexample.github.io/even.js></script>